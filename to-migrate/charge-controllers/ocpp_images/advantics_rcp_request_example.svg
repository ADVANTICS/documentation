<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="487px" preserveAspectRatio="none" style="width:816px;height:487px;" version="1.1" viewBox="0 0 816 487" width="816px" zoomAndPan="magnify"><defs><filter height="300%" id="f1atanjkvjvzp3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#7FFFD4" height="465.2891" style="stroke: #A80036; stroke-width: 1.0;" width="308" x="14" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="242" x="47" y="16.0669">Charge Point Vendor Application</text><rect fill="#D3D3D3" height="465.2891" style="stroke: #A80036; stroke-width: 1.0;" width="308" x="491" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="217" x="536.5" y="16.0669">ADVANTICS OCPP Application</text><rect fill="#FFFFFF" filter="url(#f1atanjkvjvzp3)" height="74.3984" style="stroke: #000000; stroke-width: 2.0;" width="241.5" x="161" y="75.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="89" x2="89" y1="58.4297" y2="475.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="244" x2="244" y1="58.4297" y2="475.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="566" x2="566" y1="58.4297" y2="475.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="721" x2="721" y1="58.4297" y2="475.2891"/><rect fill="#FEFECE" filter="url(#f1atanjkvjvzp3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="53" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="60" y="43.1279">DEALER</text><rect fill="#FEFECE" filter="url(#f1atanjkvjvzp3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="206" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="213" y="43.1279">ROUTER</text><rect fill="#FEFECE" filter="url(#f1atanjkvjvzp3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="530" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="537" y="43.1279">DEALER</text><rect fill="#FEFECE" filter="url(#f1atanjkvjvzp3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="683" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="690" y="43.1279">ROUTER</text><path d="M161,75.4297 L238,75.4297 L238,82.4297 L228,92.4297 L161,92.4297 L161,75.4297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="74.3984" style="stroke: #000000; stroke-width: 2.0;" width="241.5" x="161" y="75.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="176" y="88.4966">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="253" y="87.6401">[polling thread]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="244.5" x2="286.5" y1="128.8281" y2="128.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="286.5" x2="286.5" y1="128.8281" y2="141.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245.5" x2="286.5" y1="141.8281" y2="141.8281"/><polygon fill="#A80036" points="255.5,137.8281,245.5,141.8281,255.5,145.8281,251.5,141.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="251.5" y="108.6294">continously check</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="251.5" y="123.7622">for incoming requests</text><polygon fill="#FBFB77" filter="url(#f1atanjkvjvzp3)" points="499,161.8281,633,161.8281,643,172.8281,633,184.8281,499,184.8281,489,172.8281,499,161.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="501" y="177.895">dealer.send_json(...)</text><polygon fill="#A80036" points="255.5,207.0938,245.5,211.0938,255.5,215.0938,251.5,211.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249.5" x2="565.5" y1="211.0938" y2="211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="298" x="261.5" y="206.0278">{"request": "b_remote_function", "params": []}</text><polygon fill="#FBFB77" filter="url(#f1atanjkvjvzp3)" points="166,224.0938,323,224.0938,333,243.0938,323,262.0938,166,262.0938,156,243.0938,166,224.0938" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="168" y="240.1606">ident = router.recv()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="168" y="255.2935">req = router.recv_json()</text><polygon fill="#A80036" points="14,284.4922,4,288.4922,14,292.4922,10,288.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="243.5" y1="288.4922" y2="288.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="20" y="283.4263">execute request</text><polygon fill="#A80036" points="232.5,313.625,242.5,317.625,232.5,321.625,236.5,317.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3" x2="238.5" y1="317.625" y2="317.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="10" y="312.5591">construct reply</text><polygon fill="#FBFB77" filter="url(#f1atanjkvjvzp3)" points="168,330.625,320,330.625,330,349.625,320,368.625,168,368.625,158,349.625,168,330.625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="170" y="346.6919">router.send(ident, ...)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="170" y="361.8247">router.send_json(reply)</text><polygon fill="#A80036" points="554.5,391.0234,564.5,395.0234,554.5,399.0234,558.5,395.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244.5" x2="560.5" y1="395.0234" y2="395.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="251.5" y="389.9575">{"reply": false}</text><polygon fill="#FBFB77" filter="url(#f1atanjkvjvzp3)" points="501,408.0234,631,408.0234,641,419.0234,631,431.0234,501,431.0234,491,419.0234,501,408.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="503" y="424.0903">dealer.recv_json(...)</text><polygon fill="#A80036" points="798,453.2891,808,457.2891,798,461.2891,802,457.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="566.5" x2="804" y1="457.2891" y2="457.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="573.5" y="452.2231">process reply</text><!--
@startuml /ocpp_images/advantics_rcp_request_example
hide footbox
skinparam BoxPadding 10
skinparam ParticipantPadding 35

box "Charge Point Vendor Application" #AquaMarine
participant "DEALER" as CPVA_ROUTER
participant "ROUTER" as CPVA_DEALER
endbox
box "ADVANTICS OCPP Application" #LightGray
participant "DEALER" as OCPP_ROUTER
participant "ROUTER" as OCPP_DEALER
endbox

loop	polling thread
CPVA_DEALER -> CPVA_DEALER: continously check\nfor incoming requests
end

hnote over OCPP_ROUTER: dealer.send_json(...)
OCPP_ROUTER -> CPVA_DEALER: {"request": "b_remote_function", "params": []}

hnote over CPVA_DEALER: ident = router.recv()\nreq = router.recv_json()
[<- - CPVA_DEALER : execute request
[- -> CPVA_DEALER : construct reply
hnote over CPVA_DEALER: router.send(ident, ...)\nrouter.send_json(reply)
CPVA_DEALER -> OCPP_ROUTER: {"reply": false}

hnote over OCPP_ROUTER: dealer.recv_json(...)
OCPP_ROUTER - ->] : process reply

@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.19+7-post-Ubuntu-0ubuntu120.04.1
Operating System: Linux
OS Version: 5.15.0-76-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>