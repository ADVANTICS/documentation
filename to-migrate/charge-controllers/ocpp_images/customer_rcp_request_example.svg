<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="487px" preserveAspectRatio="none" style="width:776px;height:487px;" version="1.1" viewBox="0 0 776 487" width="776px" zoomAndPan="magnify"><defs><filter height="300%" id="f15g2awhoz86is" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#7FFFD4" height="465.2891" style="stroke: #A80036; stroke-width: 1.0;" width="308" x="36.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="242" x="69.5" y="16.0669">Charge Point Vendor Application</text><rect fill="#D3D3D3" height="465.2891" style="stroke: #A80036; stroke-width: 1.0;" width="308" x="366.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="217" x="412" y="16.0669">ADVANTICS OCPP Application</text><rect fill="#FFFFFF" filter="url(#f15g2awhoz86is)" height="74.3984" style="stroke: #000000; stroke-width: 2.0;" width="241.5" x="513.5" y="75.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="111.5" x2="111.5" y1="58.4297" y2="475.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="266.5" x2="266.5" y1="58.4297" y2="475.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="441.5" x2="441.5" y1="58.4297" y2="475.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="596.5" x2="596.5" y1="58.4297" y2="475.2891"/><rect fill="#FEFECE" filter="url(#f15g2awhoz86is)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="75.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="82.5" y="43.1279">DEALER</text><rect fill="#FEFECE" filter="url(#f15g2awhoz86is)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="228.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="235.5" y="43.1279">ROUTER</text><rect fill="#FEFECE" filter="url(#f15g2awhoz86is)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="405.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="412.5" y="43.1279">DEALER</text><rect fill="#FEFECE" filter="url(#f15g2awhoz86is)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="558.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="565.5" y="43.1279">ROUTER</text><path d="M513.5,75.4297 L590.5,75.4297 L590.5,82.4297 L580.5,92.4297 L513.5,92.4297 L513.5,75.4297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="74.3984" style="stroke: #000000; stroke-width: 2.0;" width="241.5" x="513.5" y="75.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="528.5" y="88.4966">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="605.5" y="87.6401">[polling thread]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="597" x2="639" y1="128.8281" y2="128.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="639" x2="639" y1="128.8281" y2="141.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="598" x2="639" y1="141.8281" y2="141.8281"/><polygon fill="#A80036" points="608,137.8281,598,141.8281,608,145.8281,604,141.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="604" y="108.6294">continously check</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="604" y="123.7622">for incoming requests</text><polygon fill="#FBFB77" filter="url(#f15g2awhoz86is)" points="45,161.8281,179,161.8281,189,172.8281,179,184.8281,45,184.8281,35,172.8281,45,161.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="47" y="177.895">dealer.send_json(...)</text><polygon fill="#A80036" points="585,207.0938,595,211.0938,585,215.0938,589,211.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="112" x2="591" y1="211.0938" y2="211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="434" x="119" y="206.0278">{"request": "a_remote_function", "params": ["arg_1", 2, {"and": 3}]}</text><polygon fill="#FBFB77" filter="url(#f15g2awhoz86is)" points="518,224.0938,675,224.0938,685,243.0938,675,262.0938,518,262.0938,508,243.0938,518,224.0938" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="531" y="240.1606">ident = router.recv()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="520" y="255.2935">req = router.recv_json()</text><polygon fill="#A80036" points="753,284.4922,763,288.4922,753,292.4922,757,288.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="597" x2="759" y1="288.4922" y2="288.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="604" y="283.4263">execute request</text><polygon fill="#A80036" points="608,313.625,598,317.625,608,321.625,604,317.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="602" x2="764" y1="317.625" y2="317.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="614" y="312.5591">construct reply</text><polygon fill="#FBFB77" filter="url(#f15g2awhoz86is)" points="521,330.625,673,330.625,683,349.625,673,368.625,521,368.625,511,349.625,521,330.625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="529" y="346.6919">router.send(ident, ...)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="523" y="361.8247">router.send_json(reply)</text><polygon fill="#A80036" points="123,391.0234,113,395.0234,123,399.0234,119,395.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="596" y1="395.0234" y2="395.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="129" y="389.9575">{"reply": true}</text><polygon fill="#FBFB77" filter="url(#f15g2awhoz86is)" points="53,408.0234,171,408.0234,181,419.0234,171,431.0234,53,431.0234,43,419.0234,53,408.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="55" y="424.0903">dealer.recv_json()</text><polygon fill="#A80036" points="14,453.2891,4,457.2891,14,461.2891,10,457.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="111" y1="457.2891" y2="457.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="20" y="452.2231">process reply</text><!--
@startuml /ocpp_images/customer_rcp_request_example
hide footbox
skinparam BoxPadding 10
skinparam ParticipantPadding 35
skinparam noteTextAlignment center

box "Charge Point Vendor Application" #AquaMarine
participant "DEALER" as CPVA_ROUTER
participant "ROUTER" as CPVA_DEALER
endbox
box "ADVANTICS OCPP Application" #LightGray
participant "DEALER" as OCPP_ROUTER
participant "ROUTER" as OCPP_DEALER
endbox

loop	polling thread
OCPP_DEALER -> OCPP_DEALER: continously check\nfor incoming requests
end

hnote over CPVA_ROUTER: dealer.send_json(...)
CPVA_ROUTER -> OCPP_DEALER: {"request": "a_remote_function", "params": ["arg_1", 2, {"and": 3}]}

hnote over OCPP_DEALER: ident = router.recv()\nreq = router.recv_json()
OCPP_DEALER - ->] : execute request
OCPP_DEALER <- -] : construct reply
hnote over OCPP_DEALER: router.send(ident, ...)\nrouter.send_json(reply)
OCPP_DEALER -> CPVA_ROUTER: {"reply": true}

hnote over CPVA_ROUTER: dealer.recv_json()
[<- - CPVA_ROUTER : process reply

@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.19+7-post-Ubuntu-0ubuntu120.04.1
Operating System: Linux
OS Version: 5.15.0-76-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>